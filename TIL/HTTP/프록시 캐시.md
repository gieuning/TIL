# 2025-03-21
---

# 프록시 캐시란
> 프록시 서버가 클라이언트의 요청 결과(응답)를 중간에 저장해두고 재사용 하는 기능이다. 웹 서버에 매번 요청하지 않고
한 번 받아온 데이터를 여러 클라이언트에게 제공함으로써 트래픽 감소, 응답 속도 향상, 서버 부하 감소 등의 효과를 얻을 수  있다.

---

> 프록시 서버는 클라이언트(사용자)와 실제 서버 사이에서 중계자 역할을 수행하는 서버이다.
사용자의 요청을 받아서 실제 서버에 대신 전달하고, 응답도 받아서 다시 사용자에게 전달한다. 

- 사용자 <-> 프록시 서버 <-> 실제 서버 

## 2. 프록시 캐시 동작 흐름

1. 클라이언트가 프록시 서버를 통해 요청
2. 프록시 서버가 **캐시에 저장된 응답이 있는지 확인**
3. 있다면 → **캐시된 응답을 반환**
4. 없다면 → 원 서버에 요청하고, 응답을 **프록시에 저장한 뒤 클라이언트에 전달**

---

## 3. 프록시 캐시의 위치

| 구분 | 위치 | 예시 |
|------|------|------|
| **포워드 프록시 (Forward Proxy)** | 클라이언트 앞 | 기업 내부 프록시, VPN |
| **리버스 프록시 (Reverse Proxy)** | 서버 앞 | CDN, Nginx, Varnish |

---

## 4. 프록시 캐시 관련 HTTP 헤더

| 헤더 | 설명 | 대상 |
|------|--------------------------|--------|
| `Cache-Control: public` | 모든 캐시(프록시 포함)에 저장 가능 | 서버 → 프록시/클라이언트 |
| `Cache-Control: s-maxage=초` | **공용 캐시(프록시)**만을 위한 만료 시간 | 서버 → 프록시 |
| `Vary` | 어떤 요청 헤더에 따라 캐시를 구분할지 지정 | 서버 → 프록시 |
| `Age` | 캐시된 응답이 **얼마나 오래됐는지(초)** 표시 | 프록시 → 클라이언트 |

---

## CDN
- 전 세계에 분산된 프록시 서버를 통해 가장 가까운 위치에서 빠르게 응답을 제공하는 프록시 캐시 기술 기반의 시스템

---

- 클라이언트 -> 가까운 CND 서버에 요청
- CDN이 캐시된 응답을 반환 or 원 서버에서 받아온다.
- 이미지, JS, CSS, 동영상 등에 매우 효과적


---
**정리**
- 프록시 캐시는 중간 서버가 응답을 저장하고 재사용하는 기능
- Cache-Control, s-maxage, public 등의 헤더로 캐시 동작 제어
- CDN은 프록시 캐시의 대표적인 활용 사례
- 성능 향상에는 좋지만, 보안·정확성이 중요한 데이터는 캐시 제외해야 함