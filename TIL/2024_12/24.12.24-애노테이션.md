# 2024-12
---

# μ¤λ κ³µλ¶€ λ‚΄μ©

<details>
  <summary>μƒμ„±μλ¥Ό μ΄μ©ν• μμ΅΄μ„± μ£Όμ…</summary>

  ```java
package com.anno.user1;

import org.springframework.beans.factory.annotation.Autowired;

public class User2 {

  private UserService userService;

  // μƒμ„±μλ¥Ό μ΄μ©ν• μμ΅΄μ„± μ£Όμ…
  // μ¤ν”„λ§ 5.1 μ΄μƒλ¶€ν„°λ” <context:annotation-config />κ°€ μ„¤μ •λμ–΄ μλ” κ²½μ° μƒμ„±μλ¥Ό μ΄μ©ν• μμ΅΄μ„± μ£Όμ…μ—μ„ @Autowired μƒλµκ°€λ¥
  @Autowired
  public User2(UserService userService) {
    this.userService = userService;
  }

  public void write() {
    String s = userService.message();

    System.out.println("-- μ• λ…Έν…μ΄μ… : μƒμ„±μλ¥Ό μ΄μ©ν• μμ΅΄κ΄€κ³„ μ„¤μ • -- ");
    System.out.println(s);
  }
}
   ```

</details>

`<context:component-scan base-package="com.anno.user6"/> ` λ” 
@Component @Service, @Controller, @RestController, @Repositoryλ“±μ μ¤νΈλ μ¤ νƒ€μ… μ• λ…Έν…μ΄μ… ν™μ„±ν™” 
@Autowired, @Resource λ“±μ μ• λ…Έν…μ΄μ…λ„ ν™μ„±ν™” 

`	<context:component-scan base-package="com.anno.user7" use-default-filters="false">
		<context:include-filter type="annotation" expression="org.springframework.stereotype.Service"/>
	</context:component-scan>`
- user-default-filters="false" : μ»΄ν¬λ„νΈλ¥Ό μλ™μΌλ΅ μ¤μΊ”ν•μ§€ μ•λ”λ‹¤. 
- expression="org.springframework.stereotype.Service" : @Serviceλ§ μ¤μΊ”, @Componentλ΅ μμ • μ‹ λ¨λ‘ κ²€μƒ‰ 

- @Component("user.userService") // λΉμ μ΄λ¦„ μ„¤μ •
- @Primary : ν•λ‚μ λΉμ„ κΈ°λ³Έ λΉμΌλ΅ μ§€μ • 
- @Service 

### π“¦ μ»΄ν¬λ„νΈ μ¤ν…λ μ¤νƒ€μ… μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                  |
|---------------------|-------------------------------------------------------------------------|
| `@Component`        | μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— μΌλ°μ μΈ λΉ(Bean)μ„ λ“±λ΅ν•  λ• μ‚¬μ©. (λΉμ μ΄λ¦„μ΄ λ™μΌν• κ²ƒμ΄ λ‘κ° μ΄μƒ μμΌλ©΄ μμ™Έ)          |
| `@Service`          | λΉ„μ¦λ‹μ¤ λ΅μ§μ„ μν–‰ν•λ” μ„λΉ„μ¤ κ³„μΈµμ λΉμ„ λ“±λ΅ν•  λ• μ‚¬μ©.                                      |
| `@Repository`       | λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµ(DAO)μ λΉμ„ λ“±λ΅ν•  λ• μ‚¬μ©. λ°μ΄ν„°λ² μ΄μ¤ μμ™Έλ¥Ό μ¤ν”„λ§ μμ™Έλ΅ λ³€ν™.                     |
| `@Controller`       | μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ μ»¨νΈλ΅¤λ¬ λΉμ„ λ“±λ΅ν•  λ• μ‚¬μ©.                                             |
| `@RestController`   | RESTful μ›Ή μ„λΉ„μ¤μ μ»¨νΈλ΅¤λ¬ λΉμ„ λ“±λ΅ν•  λ• μ‚¬μ©. `@Controller`μ™€ `@ResponseBody`λ¥Ό ν•©μΉ ν•νƒ. |

### π”— μμ΅΄μ„± μ£Όμ… μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                       |
|---------------------|------------------------------------------------------------------------------------------------|
| `@Autowired`        | μ¤ν”„λ§μ΄ μλ™μΌλ΅ λΉμ„ μ£Όμ…ν•λ„λ΅ μ§€μ •. κΈ°λ³Έμ μΌλ΅ νƒ€μ… κΈ°μ¤€μΌλ΅ μ£Όμ….                           |
| `@Qualifier`        | λ™μΌν• νƒ€μ…μ λΉμ΄ μ—¬λ¬ κ°μΌ λ• νΉμ • λΉμ„ μ§€μ •ν•μ—¬ μ£Όμ….                                         |
| `@Inject`           | JSR-330 ν‘μ¤€μ μμ΅΄μ„± μ£Όμ… μ• λ…Έν…μ΄μ…. `@Autowired`μ™€ μ μ‚¬.                                     |
| `@Named`            | JSR-330 ν‘μ¤€μ λΉ μ΄λ¦„ μ§€μ • μ• λ…Έν…μ΄μ…. `@Qualifier`μ™€ μ μ‚¬.                                    |
| `@Resource`         | JSR-250 ν‘μ¤€μ μμ΅΄μ„± μ£Όμ… μ• λ…Έν…μ΄μ…. λΉ μ΄λ¦„μ„ κΈ°μ¤€μΌλ΅ μ£Όμ….                                   |

### π› οΈ μ„¤μ • κ΄€λ ¨ μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                       |
|---------------------|------------------------------------------------------------------------------------------------|
| `@Configuration`    | μ¤ν”„λ§ μ„¤μ • ν΄λμ¤λ¥Ό μ§€μ •. λΉ μ •μλ¥Ό μλ°” μ½”λ“λ΅ μ‘μ„±ν•  λ• μ‚¬μ©.                                |
| `@Bean`             | λ©”μ„λ“κ°€ λ°ν™ν•λ” κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅. `@Configuration` ν΄λμ¤ λ‚΄μ—μ„ μ£Όλ΅ μ‚¬μ©.           |
| `@ComponentScan`    | νΉμ • ν¨ν‚¤μ§€λ¥Ό μ¤μΊ”ν•μ—¬ μ»΄ν¬λ„νΈ μ¤ν…λ μ¤νƒ€μ… μ• λ…Έν…μ΄μ…μ΄ μλ” ν΄λμ¤λ¥Ό μλ™μΌλ΅ λΉμΌλ΅ λ“±λ΅.    |
| `@PropertySource`   | μ™Έλ¶€ ν”„λ΅νΌν‹° νμΌμ„ μ¤ν”„λ§ ν™κ²½μ— μ¶”κ°€.                                                     |

### π€ AOP κ΄€λ ¨ μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                       |
|---------------------|------------------------------------------------------------------------------------------------|
| `@Aspect`           | AOPμ κ΄€μ (Aspect)μ„ μ •μ.                                                                       |
| `@Before`           | μ§€μ •λ μ΅°μΈ ν¬μΈνΈ μ „μ— μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰.                                                        |
| `@After`            | μ§€μ •λ μ΅°μΈ ν¬μΈνΈ ν›„μ— μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰.                                                        |

### β™οΈ νΈλμ­μ… κ΄€λ¦¬ μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                       |
|---------------------|------------------------------------------------------------------------------------------------|
| `@Transactional`    | λ©”μ„λ“λ‚ ν΄λμ¤μ— νΈλμ­μ… κ²½κ³„λ¥Ό μ„¤μ •. μλ™μΌλ΅ νΈλμ­μ…μ„ μ‹μ‘ν•κ³  μ»¤λ°‹ λλ” λ΅¤λ°±.              |
| `@EnableTransactionManagement` | μ¤ν”„λ§μ νΈλμ­μ… κ΄€λ¦¬ κΈ°λ¥μ„ ν™μ„±ν™”.                                           |

### π§° κΈ°νƒ€ μ μ©ν• μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                       |
|---------------------|------------------------------------------------------------------------------------------------|
| `@Value`            | ν”„λ΅νΌν‹° κ°’μ„ μ£Όμ….                                                                             |
| `@RestControllerAdvice` | μ „μ—­ μμ™Έ μ²λ¦¬, λ°”μΈλ”©, λ°μ΄ν„° λ°”μΈλ”© λ“±μ μ–΄λ“λ°”μ΄μ¤λ¥Ό μ κ³µ.                                  |

## AOP
- κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ„ λ³΄μ™„ν•λ” ν¨λ¬λ‹¤μ„μΌλ΅, ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό ν΅λ‹¨ κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μ—¬ λ¨λ“ν™”ν•λ” ν”„λ΅κ·Έλλ° κΈ°λ²•

ν΅λ‹¨ κ΄€μ‹¬μ‚¬
- μ—¬λ¬ λ¨λ“μ— κ±Έμ³ κ³µν†µμ μΌλ΅ μ μ©λλ” κ΄€μ‹¬μ‚¬
- μ) λ΅κΉ…, νΈλμ­μ… κ΄€λ¦¬, μΈμ¦/μΈκ°€, μΊμ‹± λ“±.

ν•µμ‹¬ κ΄€μ‹¬μ‚¬
- μ• ν”λ¦¬μΌ€μ΄μ…μ μ£Όμ” λΉ„μ¦λ‹μ¤ λ΅μ§
- AOPλ” ν•µμ‹¬ κ΄€μ‹¬μ‚¬μ— μν–¥μ„ μ£Όμ§€ μ•κ³  ν΅λ‹¨ κ΄€μ‹¬μ‚¬λ¥Ό μ²λ¦¬ν•λ” λ° μ΄μ μ„ λ§μ¶¤ 

κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•μ—¬ κ°€λ…μ„±, μ μ§€λ³΄μμ„±, μ¬μ‚¬μ©μ„±μ„ ν–¥μƒ

### π€ AOP μ£Όμ” κ°λ…

| **κ°λ…**            | **μ„¤λ…**                                                                                     |
|---------------------|---------------------------------------------------------------------------------------------|
| Aspect              | AOPμ λ‹¨μ„λ΅, κ΄€μ‹¬μ‚¬μ λ¨λ“ν™”. μ–΄λ“λ°”μ΄μ¤μ™€ ν¬μΈνΈμ»·μ„ ν¬ν•¨.                                  |
| Advice              | μ΅°μΈ ν¬μΈνΈμ—μ„ μ‹¤ν–‰λλ” μ‘μ—…. `@Before`, `@After`, `@Around` λ“±μΌλ΅ μ •μ.                     |
| Pointcut            | μ–΄λ“λ°”μ΄μ¤κ°€ μ μ©λ  ν•λ‚ μ΄μƒμ μ΅°μΈ ν¬μΈνΈλ¥Ό μ •μν•λ” ν‘ν„μ‹.                                 |
| Join Point          | μ–΄λ“λ°”μ΄μ¤κ°€ μ μ©λ  μ μλ” νΉμ • μ‹¤ν–‰ μ§€μ  (μ: λ©”μ„λ“ νΈμ¶).                                  |
| Target Object       | μ–΄λ“λ°”μ΄μ¤κ°€ μ μ©λλ” μ‹¤μ  κ°μ²΄.                                                              |
| Proxy Object        | AOP ν”„λ΅μ‹κ°€ μƒμ„±ν• κ°μ²΄. νƒ€κ² κ°μ²΄λ¥Ό λ€μ‹ ν•μ—¬ μ”μ²­μ„ μ²λ¦¬.                                   |
| Weaving             | Aspectμ™€ Target Objectλ¥Ό κ²°ν•©ν•λ” κ³Όμ •. (μ»΄νμΌ νƒ€μ„, λ΅λ“ νƒ€μ„, λ°νƒ€μ„ λ“±)                   |

---

### π€ AOP ν‘ν„μ‹ (Pointcut)

| **ν‘ν„μ‹**          | **μ„¤λ…**                                                                                     |
|---------------------|---------------------------------------------------------------------------------------------|
| `execution`         | λ©”μ„λ“ μ‹¤ν–‰ μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •. λ©”μ„λ“ μ΄λ¦„, λ¦¬ν„΄ νƒ€μ…, λ§¤κ°λ³€μ λ“±μ„ ν¬ν•¨ κ°€λ¥.                |
| `within`            | νΉμ • νƒ€μ…(ν΄λμ¤ λλ” ν¨ν‚¤μ§€)μ λ¨λ“  μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •.                                       |
| `this`              | ν”„λ΅μ‹ κ°μ²΄μ νƒ€μ…κ³Ό μΌμΉν•λ” μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •.                                              |
| `target`            | λ€μƒ κ°μ²΄μ νƒ€μ…κ³Ό μΌμΉν•λ” μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •.                                                |
| `args`              | μ „λ‹¬λ μΈμμ νƒ€μ…κ³Ό μΌμΉν•λ” μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •.                                              |
| `@annotation`       | νΉμ • μ• λ…Έν…μ΄μ…μ΄ μ μ©λ μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •.                                                   |

---

### π€ AOP κ΄€λ ¨ μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                     |
|---------------------|---------------------------------------------------------------------------------------------|
| `@Aspect`           | AOPμ κ΄€μ (Aspect)μ„ μ •μ. AOPλ¥Ό μ‚¬μ©ν•λ ¤λ©΄ ν΄λμ¤μ— μ΄ μ• λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ•Ό ν•¨.            |
| `@Before`           | μ§€μ •λ μ΅°μΈ ν¬μΈνΈ μ „μ— μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰.                                                   |
| `@After`            | μ§€μ •λ μ΅°μΈ ν¬μΈνΈ ν›„μ— μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰.                                                   |
| `@AfterReturning`   | μ΅°μΈ ν¬μΈνΈκ°€ μ •μƒμ μΌλ΅ μ™„λ£λ ν›„ μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰. λ°ν™ κ°’μ„ μ²λ¦¬ν•  μ μμ.                |
| `@AfterThrowing`    | μ΅°μΈ ν¬μΈνΈμ—μ„ μμ™Έκ°€ λ°μƒν–μ„ λ• μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰.                                         |
| `@Around`           | μ΅°μΈ ν¬μΈνΈ μ „ν›„μ— μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‹¤ν–‰. λ©”μ„λ“ μ‹¤ν–‰ μ μ–΄ λ° λ°ν™ κ°’μ„ λ³€κ²½ κ°€λ¥.                 |
| `@Pointcut`         | μ¬μ‚¬μ© κ°€λ¥ν• ν¬μΈνΈμ»·(μ΅°μΈ ν¬μΈνΈλ¥Ό μ§€μ •ν•λ” ν‘ν„μ‹)μ„ μ •μ.                                 |

---


### π€ AOP μ„¤μ • κ΄€λ ¨ μ• λ…Έν…μ΄μ…

| **μ• λ…Έν…μ΄μ…**      | **λ©μ **                                                                                     |
|---------------------|---------------------------------------------------------------------------------------------|
| `@EnableAspectJAutoProxy` | AOP ν”„λ΅μ‹λ¥Ό ν™μ„±ν™”. Spring AOP μ„¤μ • μ‹ ν•„μ.                                                |

---

### π€ μμ‹ μ½”λ“

#### 1. Aspect μ •μ
```java
@Aspect
@Component
public class LoggingAspect {

    @Before("execution(* com.example.service.*.*(..))")
    public void logBeforeMethodExecution() {
        System.out.println("Method is about to execute");
    }

    @After("execution(* com.example.service.*.*(..))")
    public void logAfterMethodExecution() {
        System.out.println("Method has executed");
    }

    @AfterReturning(pointcut = "execution(* com.example.service.*.*(..))", returning = "result")
    public void logAfterReturning(Object result) {
        System.out.println("Method returned: " + result);
    }
}
```

MethodBeforeAdvice : λ€μƒ κ°μ²΄μ λ©”μ†λ“λ¥Ό μ‹¤ν–‰ν•κΈ° μ „μ— κ³µν†µ κΈ°λ¥μ„ μ‹¤ν–‰ν•  λ• μ‚¬μ©ν•λ” Advice

AfterLogAdvice:
- λ€μƒ κ°μ²΄μ λ©”μ†λ“λ¥Ό μ‹¤ν–‰ μ΄ν›„μ— κ³µν†µ κΈ°λ¥μ„ μ‹¤ν•΄μ•γ„Ήλ• μ‚¬μ©ν•λ” Advice
- μμ™Έμ—†μ΄ μ‹¤ν–‰λ κ²½μ°μ—λ§ μ‹¤ν–‰ 

MethodInterceptor:
- λ©”μ†λ“ μ‹¤ν–‰ μ „, ν›„ λλ” μμ™Έ λ°μƒ μ‹μ μ— κ³µν†µκΈ°λ¥μ„ μ‹¤ν–‰ν•  μ μλ‹¤. 
- MethodBeforeAdvice, AfterReturningAdvice, ThrowAdvice μ„Έκ°€μ§€ Adviceλ¥Ό ν•λ‚λ΅ λ¬¶μ€ Advice 

μμ  μ‹λ‚λ¦¬μ¤
Target: μ‹¤μ  μ‘μ—…μ„ μν–‰ν•λ” ν•µμ‹¬ ν΄λμ¤μ™€ λ©”μ„λ“ (μ: write λ©”μ„λ“).

write λ©”μ„λ“λ” λ°μ΄ν„°λ¥Ό μ‚½μ…(insert)ν•λ” μ‘μ—…μ„ μν–‰ν•λ©°, μ΄ μ‘μ—…μ„ μν–‰ν•λ ¤λ©΄ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° κ°μ²΄(conn)κ°€ ν•„μ”ν•©λ‹λ‹¤.

Advice: λ¶€κ°€μ μΌλ΅ μ‹¤ν–‰ν•  μ‘μ—…. μ—¬κΈ°μ„ conn κ°μ²΄λ¥Ό ν™μ©ν•΄ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°μ„ μ„¤μ •ν•κ±°λ‚, νΈλμ­μ…μ„ κ΄€λ¦¬ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

Pointcut: νΉμ • λ©”μ„λ“(write)μ—μ„λ§ connμ„ μ‹¤ν–‰ν•λ„λ΅ μ§€μ •ν•λ” κ·μΉ™μ…λ‹λ‹¤. μ΄ κ·μΉ™μ€ AOP ν‘ν„μ‹μΌλ΅ μ •μλ©λ‹λ‹¤.

Advisor: Adviceμ™€ Pointcutμ„ μ—°κ²°ν•λ” κµ¬μ„± μ”μ†λ΅, write λ©”μ„λ“μ—μ„λ§ νΉμ • Adviceκ°€ μ‹¤ν–‰λλ„λ΅ μ„¤μ •ν•©λ‹λ‹¤.
