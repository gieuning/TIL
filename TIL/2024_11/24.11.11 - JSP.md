# 2024-11-11
---

# 오늘 공부 내용

# JSP
- JSP는 HTML내에 자바 코드를 삽입하여 웹 서버에서 동적으로 웹 페이지를 생성하여 웹 브라우저에게 돌려주는 언어
- Java EE 스펙 중 일부로 웹 애플리케이션 서버에서 동작한다.

## 스크립틀릿(Scriptlet): `<% ... %>`
- JSP 페이지에서 Java 코드를 삽입하고 실행할 때 사용
- `<%`와 `%>` 사이에 Java 코드를 작성하며, 코드는 페이지가 요청될 때마다 실행된다.
```java
<%
    String name = "홍길동";
    out.println("안녕하세요, " + name + "님!");
%>
```

## 표현식(Expression): `<%= ... %>`
- Java 코드의 결과값을 출력할 대 사용한다.
- `<%= ... %>` 사이에 표현식을 작성하면, 해당 표현식의 결과가 HTML로 바로 출력된다. <br>
- ex) ` 나이 : <%= age != -1 ? age : "유효하지 않은 나이" %>`

## 선언문(Declaration): `<%! ... %>`
- JSP 페이지 내에서 메서드나 변수를 선언할 때 사용
- `<%! ... %>` 사이에 선언된 변수나 메서드는 JSP 페이지에서 전역적으로 사용된다.
```java
<%! 
    private int count = 0;
    
    public String greetUser(String name) {
        return "안녕하세요, " + name + "님!";
    }
%>
```

## 지시어(Directive)
- JSP 페이지에 대한 설정을 지정할 때 사용
- 주로 페이지 설정, import문 추가 등을 위한 `<%@ @>` 문법이 있으며, 대표적인 지시어는 `page`, `include`, `taglib`가 있다.
```java
<%@ page contentType="text/html; charset=UTF-8" language="java" %>
<%@ page import="java.util.Date" %>
```

## 내장객체
| 내장 객체       | 설명                                                    | 주요 기능                                                                                  |
|----------------|--------------------------------------------------------|------------------------------------------------------------------------------------------|
| `request`      | 클라이언트의 요청 정보를 담고 있는 객체                   | 파라미터 가져오기, 헤더 정보 읽기, 쿠키 읽기                                               |
| `response`     | 서버의 응답을 관리하는 객체                              | 헤더 설정, 쿠키 전송, 리다이렉트 처리                                                      |
| `session`      | 사용자별 세션 정보를 관리하는 객체                        | 로그인 상태 저장, 사용자별 데이터 저장                                                     |
| `application`  | 애플리케이션 전역 데이터를 관리하는 객체                  | 모든 사용자에게 공통된 데이터 저장 및 공유                                                  |
| `out`          | 클라이언트에게 출력하는 객체                              | 텍스트 출력, 버퍼 제어, 플러시                                                              |
| `config`       | JSP 페이지의 설정 정보를 담고 있는 객체                   | 초기화 파라미터 읽기                                                                       |
| `pageContext`  | JSP 페이지의 모든 정보를 관리하는 객체                    | `request`, `response`, `session`, `application` 객체 접근 및 다양한 JSP 정보 제공           |
| `page`         | 현재 JSP 페이지를 참조하는 객체                          | 현재 페이지 정보 접근                                                                      |
| `exception`    | JSP 페이지에서 발생한 예외 정보를 담고 있는 객체 (오류 페이지에서 사용) | 예외의 상세 정보 제공                                                                       |


## errorPage 
웹 애플리케이션에서 오류가 발생했을 때 사용자에게 보여줄 오류 처리 페이지를 지정하기 위한 설정.
JSP에서는 `errorpage` 설정을 통해 특정한 오류가 발생했을 때 사용자에게 좀 더 친절한 안내 메시지를 제공 가능
- JSP 페이지 상단에서 `<%@ page errorPage="error.jsp" %>` 처럼 errorPage 속승을 지정하여 사용.
이 속성을 설정하면 해당 JSP 페이지에서 오류가 발생할 때 지정된 error.jsp 페이지로 이동하게 된다.
<details>
    <summary>errorPage 예시</summary>

```java
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page errorPage="error.jsp" %>
<%
    String s = "a";
    int n = Integer.parseInt(s);
%>
<html>
<head>
    <title>Title</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>

    <h3>page 지시어</h3>

    <pre>
        errorPage : 에러가 발생할때 보여질 페이지 설정
    </pre>
    <hr>

    <p><%= n %></p>
</body>
</html>

<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page isErrorPage="true" %>
<html>
<head>
    <title>Title</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
</head>
<body>

  <h3>정보</h3>
  <p>
시스템 점검중입니다. 잠시후에 다시 시도해주세요..
  </p>
</body>
</html>
```
</details>
- isErrorPage: 오류를 처리하는 error.jsp 페이지에는 `<%@ page isErrorPage="true" %>`설정을 추가해야 한다. 
이 설정을 통해 오류 정보를 접근할 수 있으며, exception 객체를 통해 발생한 예외에 대한 상세 정보를 확인할 수 있다.

## Query String : GET 방식으로 전송되는 파라미터
- 클라이언트가 서버에 GET 방식으로 데이터를 전송할 때 사용되는 파라미터
- GET 방식으로 전송할대는 한글은 반드시 인코딩해서 보내야 한다,
- 형식: `주소?이름=값&이름=값` 과 같은 형태로 URL에 추가된다.

|               | 자바                                      | 자바스크립트                        |
|---------------|------------------------------------------|-------------------------------------|
| **사용 메서드** | `URLEncoder.encode`                       | `encodeURIComponent`               |
| **예제 코드**   | `URLEncoder.encode("홍길동", StandardCharsets.UTF_8)` | `encodeURIComponent('홍길동')`     |
| **설명**       | 문자열을 URL에 포함될 수 있는 형태로 변환, 특정 문자셋(예: `UTF-8`)을 지정하여 인코딩 | 문자열을 URL에 안전하게 포함될 수 있도록 변환, 기본적으로 UTF-8 인코딩 사용 |
| **인코딩 방식** | `UTF-8` 등의 문자셋을 명시적으로 지정 가능   | 기본적으로 UTF-8 인코딩을 사용      |
| **인코딩 예시 결과** | `%ED%99%8D%EA%B8%B8%EB%8F%99`         | `%ED%99%8D%EA%B8%B8%EB%8F%99`      |

## GET, POST
|               | **GET**                                  | **POST**                            |
|---------------|------------------------------------------|-------------------------------------|
| **전송 방식**   | URL의 쿼리 문자열로 데이터 전송            | HTTP 메시지 바디에 데이터 전송        |
| **URL 길이 제한** | 있음 (브라우저와 서버에 따라 약 2000자 내외) | 없음 (서버 설정에 따라 다름)         |
| **보안**       | URL에 데이터가 노출되므로 상대적으로 보안이 약함 | 데이터가 URL에 노출되지 않아 비교적 보안이 강함 |
| **전송 데이터 용량** | 제한적 (짧은 데이터에 적합)            | 상대적으로 큰 데이터 전송에 적합     |
| **캐싱**       | 캐싱 가능, 브라우저에서 히스토리에 저장됨     | 기본적으로 캐싱되지 않음             |
| **데이터 전송 용도** | 간단한 데이터 조회, 검색              | 사용자 정보 입력, 파일 업로드 등     |
| **브라우저 히스토리** | URL에 포함된 데이터가 히스토리에 저장됨 | 히스토리에 저장되지 않음            |
| **멱등성**     | 멱등성 있음 (같은 요청을 여러 번 보내도 결과가 동일) | 멱등성 없음 (서버 상태를 변경할 수 있음) |
| **사용 예시**   | 검색 쿼리, 페이지 번호 등                 | 로그인 정보, 파일 업로드 등          |

--- 
오늘은 기본 JSP 기본문법에 대해 공부했고 form 태그의 method 방식의 get, post에 대해 어떤 방식으로 서버에 전송이 되는지 공부하게 되었다.
get 방식으로 여러번 서버에 보내보면서 눈에 보인점은 한글을 인코딩하지 않으면 때와 따라 다르지만 null 표시가 되거나, 원하지 않는 결과가 나온다.
간단한 데이터를 조회하거나, 검색, 보안이 중요하지 않으면 get 방식을 사용해도 되지만 민감한 정보를 조금이라도 가지고 있으면 무조건 post 방식을 써야한다.
